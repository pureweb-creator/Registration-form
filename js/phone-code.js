// COUNTRIES
var countries = [{"na":"Afghanistan","ph":"93","co":"AF"},{"na":"Albania","ph":"355","co":"AL"},{"na":"Algeria","ph":"213","co":"DZ"},{"na":"AmericanSamoa","ph":"1 684","co":"AS"},{"na":"Andorra","ph":"376","co":"AD"},{"na":"Angola","ph":"244","co":"AO"},{"na":"Anguilla","ph":"1 264","co":"AI"},{"na":"Antigua and Barbuda","ph":"1268","co":"AG"},{"na":"Argentina","ph":"54","co":"AR"},{"na":"Armenia","ph":"374","co":"AM"},{"na":"Aruba","ph":"297","co":"AW"},{"na":"Australia","ph":"61","co":"AU"},{"na":"Austria","ph":"43","co":"AT"},{"na":"Azerbaijan","ph":"994","co":"AZ"},{"na":"Bahamas","ph":"1 242","co":"BS"},{"na":"Bahrain","ph":"973","co":"BH"},{"na":"Bangladesh","ph":"880","co":"BD"},{"na":"Barbados","ph":"1 246","co":"BB"},{"na":"Belarus","ph":"375","co":"BY"},{"na":"Belgium","ph":"32","co":"BE"},{"na":"Belize","ph":"501","co":"BZ"},{"na":"Benin","ph":"229","co":"BJ"},{"na":"Bermuda","ph":"1 441","co":"BM"},{"na":"Bhutan","ph":"975","co":"BT"},{"na":"Bosnia and Herzegovina","ph":"387","co":"BA"},{"na":"Botswana","ph":"267","co":"BW"},{"na":"Brazil","ph":"55","co":"BR"},{"na":"British Indian Ocean Territory","ph":"246","co":"IO"},{"na":"Bulgaria","ph":"359","co":"BG"},{"na":"Burkina Faso","ph":"226","co":"BF"},{"na":"Burundi","ph":"257","co":"BI"},{"na":"Cambodia","ph":"855","co":"KH"},{"na":"Cameroon","ph":"237","co":"CM"},{"na":"Canada","ph":"1","co":"CA"},{"na":"Cape Verde","ph":"238","co":"CV"},{"na":"Cayman Islands","ph":" 345","co":"KY"},{"na":"Central African Republic","ph":"236","co":"CF"},{"na":"Chad","ph":"235","co":"TD"},{"na":"Chile","ph":"56","co":"CL"},{"na":"China","ph":"86","co":"CN"},{"na":"Christmas Island","ph":"61","co":"CX"},{"na":"Colombia","ph":"57","co":"CO"},{"na":"Comoros","ph":"269","co":"KM"},{"na":"Congo","ph":"242","co":"CG"},{"na":"Cook Islands","ph":"682","co":"CK"},{"na":"Costa Rica","ph":"506","co":"CR"},{"na":"Croatia","ph":"385","co":"HR"},{"na":"Cuba","ph":"53","co":"CU"},{"na":"Cyprus","ph":"537","co":"CY"},{"na":"Czech Republic","ph":"420","co":"CZ"},{"na":"Denmark","ph":"45","co":"DK"},{"na":"Djibouti","ph":"253","co":"DJ"},{"na":"Dominica","ph":"1 767","co":"DM"},{"na":"Dominican Republic","ph":"1 849","co":"DO"},{"na":"Ecuador","ph":"593","co":"EC"},{"na":"Egypt","ph":"20","co":"EG"},{"na":"El Salvador","ph":"503","co":"SV"},{"na":"Equatorial Guinea","ph":"240","co":"GQ"},{"na":"Eritrea","ph":"291","co":"ER"},{"na":"Estonia","ph":"372","co":"EE"},{"na":"Ethiopia","ph":"251","co":"ET"},{"na":"Faroe Islands","ph":"298","co":"FO"},{"na":"Fiji","ph":"679","co":"FJ"},{"na":"Finland","ph":"358","co":"FI"},{"na":"France","ph":"33","co":"FR"},{"na":"French Guiana","ph":"594","co":"GF"},{"na":"French Polynesia","ph":"689","co":"PF"},{"na":"Gabon","ph":"241","co":"GA"},{"na":"Gambia","ph":"220","co":"GM"},{"na":"Georgia","ph":"995","co":"GE"},{"na":"Germany","ph":"49","co":"DE"},{"na":"Ghana","ph":"233","co":"GH"},{"na":"Gibraltar","ph":"350","co":"GI"},{"na":"Greece","ph":"30","co":"GR"},{"na":"Greenland","ph":"299","co":"GL"},{"na":"Grenada","ph":"1 473","co":"GD"},{"na":"Guadeloupe","ph":"590","co":"GP"},{"na":"Guam","ph":"1 671","co":"GU"},{"na":"Guatemala","ph":"502","co":"GT"},{"na":"Guinea","ph":"224","co":"GN"},{"na":"Guinea-Bissau","ph":"245","co":"GW"},{"na":"Guyana","ph":"595","co":"GY"},{"na":"Haiti","ph":"509","co":"HT"},{"na":"Honduras","ph":"504","co":"HN"},{"na":"Hungary","ph":"36","co":"HU"},{"na":"Iceland","ph":"354","co":"IS"},{"na":"India","ph":"91","co":"IN"},{"na":"Indonesia","ph":"62","co":"ID"},{"na":"Iraq","ph":"964","co":"IQ"},{"na":"Ireland","ph":"353","co":"IE"},{"na":"Israel","ph":"972","co":"IL"},{"na":"Italy","ph":"39","co":"IT"},{"na":"Jamaica","ph":"1 876","co":"JM"},{"na":"Japan","ph":"81","co":"JP"},{"na":"Jordan","ph":"962","co":"JO"},{"na":"Kazakhstan","ph":"7 7","co":"KZ"},{"na":"Kenya","ph":"254","co":"KE"},{"na":"Kiribati","ph":"686","co":"KI"},{"na":"Kuwait","ph":"965","co":"KW"},{"na":"Kyrgyzstan","ph":"996","co":"KG"},{"na":"Latvia","ph":"371","co":"LV"},{"na":"Lebanon","ph":"961","co":"LB"},{"na":"Lesotho","ph":"266","co":"LS"},{"na":"Liberia","ph":"231","co":"LR"},{"na":"Liechtenstein","ph":"423","co":"LI"},{"na":"Lithuania","ph":"370","co":"LT"},{"na":"Luxembourg","ph":"352","co":"LU"},{"na":"Madagascar","ph":"261","co":"MG"},{"na":"Malawi","ph":"265","co":"MW"},{"na":"Malaysia","ph":"60","co":"MY"},{"na":"Maldives","ph":"960","co":"MV"},{"na":"Mali","ph":"223","co":"ML"},{"na":"Malta","ph":"356","co":"MT"},{"na":"Marshall Islands","ph":"692","co":"MH"},{"na":"Martinique","ph":"596","co":"MQ"},{"na":"Mauritania","ph":"222","co":"MR"},{"na":"Mauritius","ph":"230","co":"MU"},{"na":"Mayotte","ph":"262","co":"YT"},{"na":"Mexico","ph":"52","co":"MX"},{"na":"Monaco","ph":"377","co":"MC"},{"na":"Mongolia","ph":"976","co":"MN"},{"na":"Montenegro","ph":"382","co":"ME"},{"na":"Montserrat","ph":"1664","co":"MS"},{"na":"Morocco","ph":"212","co":"MA"},{"na":"Myanmar","ph":"95","co":"MM"},{"na":"Namibia","ph":"264","co":"NA"},{"na":"Nauru","ph":"674","co":"NR"},{"na":"Nepal","ph":"977","co":"NP"},{"na":"Netherlands","ph":"31","co":"NL"},{"na":"Netherlands Antilles","ph":"599","co":"AN"},{"na":"New Caledonia","ph":"687","co":"NC"},{"na":"New Zealand","ph":"64","co":"NZ"},{"na":"Nicaragua","ph":"505","co":"NI"},{"na":"Niger","ph":"227","co":"NE"},{"na":"Nigeria","ph":"234","co":"NG"},{"na":"Niue","ph":"683","co":"NU"},{"na":"Norfolk Island","ph":"672","co":"NF"},{"na":"Northern Mariana Islands","ph":"1 670","co":"MP"},{"na":"Norway","ph":"47","co":"NO"},{"na":"Oman","ph":"968","co":"OM"},{"na":"Pakistan","ph":"92","co":"PK"},{"na":"Palau","ph":"680","co":"PW"},{"na":"Panama","ph":"507","co":"PA"},{"na":"Papua New Guinea","ph":"675","co":"PG"},{"na":"Paraguay","ph":"595","co":"PY"},{"na":"Peru","ph":"51","co":"PE"},{"na":"Philippines","ph":"63","co":"PH"},{"na":"Poland","ph":"48","co":"PL"},{"na":"Portugal","ph":"351","co":"PT"},{"na":"Puerto Rico","ph":"1 939","co":"PR"},{"na":"Qatar","ph":"974","co":"QA"},{"na":"Romania","ph":"40","co":"RO"},{"na":"Rwanda","ph":"250","co":"RW"},{"na":"Samoa","ph":"685","co":"WS"},{"na":"San Marino","ph":"378","co":"SM"},{"na":"Saudi Arabia","ph":"966","co":"SA"},{"na":"Senegal","ph":"221","co":"SN"},{"na":"Serbia","ph":"381","co":"RS"},{"na":"Seychelles","ph":"248","co":"SC"},{"na":"Sierra Leone","ph":"232","co":"SL"},{"na":"Singapore","ph":"65","co":"SG"},{"na":"Slovakia","ph":"421","co":"SK"},{"na":"Slovenia","ph":"386","co":"SI"},{"na":"Solomon Islands","ph":"677","co":"SB"},{"na":"South Africa","ph":"27","co":"ZA"},{"na":"South Georgia and the South Sandwich Islands","ph":"500","co":"GS"},{"na":"Spain","ph":"34","co":"ES"},{"na":"Sri Lanka","ph":"94","co":"LK"},{"na":"Sudan","ph":"249","co":"SD"},{"na":"Surina","ph":"597","co":"SR"},{"na":"Swaziland","ph":"268","co":"SZ"},{"na":"Sweden","ph":"46","co":"SE"},{"na":"Switzerland","ph":"41","co":"CH"},{"na":"Tajikistan","ph":"992","co":"TJ"},{"na":"Thailand","ph":"66","co":"TH"},{"na":"Togo","ph":"228","co":"TG"},{"na":"Tokelau","ph":"690","co":"TK"},{"na":"Tonga","ph":"676","co":"TO"},{"na":"Trinidad and Tobago","ph":"1 868","co":"TT"},{"na":"Tunisia","ph":"216","co":"TN"},{"na":"Turkey","ph":"90","co":"TR"},{"na":"Turkmenistan","ph":"993","co":"TM"},{"na":"Turks and Caicos Islands","ph":"1 649","co":"TC"},{"na":"Tuvalu","ph":"688","co":"TV"},{"na":"Uganda","ph":"256","co":"UG"},{"na":"Ukraine","ph":"380","co":"UA"},{"na":"United Arab Emirates","ph":"971","co":"AE"},{"na":"United Kingdom","ph":"44","co":"GB"},{"na":"United States","ph":"1","co":"US"},{"na":"Uruguay","ph":"598","co":"UY"},{"na":"Uzbekistan","ph":"998","co":"UZ"},{"na":"Vanuatu","ph":"678","co":"VU"},{"na":"Wallis and Futuna","ph":"681","co":"WF"},{"na":"Yemen","ph":"967","co":"YE"},{"na":"Zambia","ph":"260","co":"ZM"},{"na":"Zimbabwe","ph":"263","co":"ZW"},{"na":"land Islands","ph":"","co":"AX"},{"na":"Antarctica","ph":null,"co":"AQ"},{"na":"Bolivia, Plurinational State of","ph":"591","co":"BO"},{"na":"Brunei Darussalam","ph":"673","co":"BN"},{"na":"Cocos (Keeling) Islands","ph":"61","co":"CC"},{"na":"Congo, The Democratic Republic of the","ph":"243","co":"CD"},{"na":"Cote d'Ivoire","ph":"225","co":"CI"},{"na":"Falkland Islands (Malvinas)","ph":"500","co":"FK"},{"na":"Guernsey","ph":"44","co":"GG"},{"na":"Holy See (Vatican City State)","ph":"379","co":"VA"},{"na":"Hong Kong","ph":"852","co":"HK"},{"na":"Iran, Islamic Republic of","ph":"98","co":"IR"},{"na":"Isle of Man","ph":"44","co":"IM"},{"na":"Jersey","ph":"44","co":"JE"},{"na":"Korea, Democratic People's Republic of","ph":"850","co":"KP"},{"na":"Korea, Republic of","ph":"82","co":"KR"},{"na":"Lao People's Democratic Republic","ph":"856","co":"LA"},{"na":"Libyan Arab Jamahiriya","ph":"218","co":"LY"},{"na":"Macao","ph":"853","co":"MO"},{"na":"Macedonia, The Former Yugoslav Republic of","ph":"389","co":"MK"},{"na":"Micronesia, Federated States of","ph":"691","co":"FM"},{"na":"Moldova, Republic of","ph":"373","co":"MD"},{"na":"Mozambique","ph":"258","co":"MZ"},{"na":"Palestinian Territory, Occupied","ph":"970","co":"PS"},{"na":"Pitcairn","ph":"872","co":"PN"},{"na":"Réunion","ph":"262","co":"RE"},{"na":"Russia","ph":"7","co":"RU"},{"na":"Saint Barthélemy","ph":"590","co":"BL"},{"na":"Saint Helena, Ascension and Tristan Da Cunha","ph":"290","co":"SH"},{"na":"Saint Kitts and Nevis","ph":"1 869","co":"KN"},{"na":"Saint Lucia","ph":"1 758","co":"LC"},{"na":"Saint Martin","ph":"590","co":"MF"},{"na":"Saint Pierre and Miquelon","ph":"508","co":"PM"},{"na":"Saint Vincent and the Grenadines","ph":"1 784","co":"VC"},{"na":"Sao Tome and Principe","ph":"239","co":"ST"},{"na":"Somalia","ph":"252","co":"SO"},{"na":"Svalbard and Jan Mayen","ph":"47","co":"SJ"},{"na":"Syrian Arab Republic","ph":"963","co":"SY"},{"na":"Taiwan, Province of China","ph":"886","co":"TW"},{"na":"Tanzania, United Republic of","ph":"255","co":"TZ"},{"na":"Timor-Leste","ph":"670","co":"TL"},{"na":"Venezuela, Bolivarian Republic of","ph":"58","co":"VE"},{"na":"Viet Nam","ph":"84","co":"VN"},{"na":"Virgin Islands, British","ph":"1 284","co":"VG"},{"na":"Virgin Islands, U.S.","ph":"1 340","co":"VI"}];

// PHONE CODE
var countryCache;
var countryRequesting = false;
!function(h){h.widget("custom.phonecode",{data:[],container:null,prefixField:null,searchTimeout:null,suggestTimeout:null,hideTimeout:null,options:{default_prefix:"7",prefix:"",preferCo:"ru"},_create:function(){this._loadData(),this.element.wrap('<div class="country-phone">');var e=this.element.parent(".country-phone"),t=h('<div class="country-phone-selector"><div class="country-phone-selected"></div><div class="country-phone-options"></div></div>');h(t).prependTo(e);t=this.options.prefix||"__phone_prefix",t=h('<input type="hidden" name="'+t+'" value="'+this.options.default_prefix+'">');h(t).appendTo(e),this.container=e,this.prefixField=t},_loadData:function(){var o=this;countryCache||countryRequesting?countryCache?(this.data=countryCache,o._initSelector()):countryRequesting&&countryRequesting.done(function(e){o.data=e,countryCache=o.data,o._initSelector()}):countryRequesting=h.getJSON("js/countries.json",{}).done(function(e){o.data=e,countryCache=o.data,o._initSelector()}).fail(function(e,t,n){o.data=countries,countryCache=o.data,o._initSelector()})},_initSelector:function(){var o=this.container.find(".country-phone-options"),e=this.container.find(".country-phone-selected"),t=null,i=this,n=h('<input type="search" class="country-phone-search" value="" placeholder="Search country">');h(n).appendTo(o);var s=h("");h(s).on("click",function(){h(this).hide(),h(n).focus()}).insertAfter(n),h(s).hide().show(),h(n).bind("keyup",function(e){i.suggestTimeout&&window.clearTimeout(i.suggestTimeout);var t=this,n=e;i.suggestTimeout=window.setTimeout(function(){var e=h(t).val().toLowerCase();i.suggestCountry(e),40==n.keyCode&&i._moveSuggestDown(o),38==n.keyCode&&i._moveSuggestUp(o),13==n.keyCode&&((e=h(o).find(".hovered:visible")).length&&(h(e).hasClass("country-phone-search")||(i.setElementSelected(e),i._toggleSelector())),n.stopPropagation(),n.preventDefault())},100),""==h(this).val()?h(s).show():h(s).hide()}).bind("keypress",function(e){if(13==e.keyCode)return e.stopPropagation(),e.preventDefault(),!1});for(var r=0;r<this.data.length;r++){0==r&&(t=this.data[r]);var a=this.data[r],c=a.co.toLowerCase(),l=h('<div data-phone="'+a.ph+'" data-co="'+c.toLowerCase()+'" class="country-phone-option"><span><img src="img/blank.gif" class="flag flag-'+a.co.toLowerCase()+'">+'+a.ph+"</span>"+a.na+"</div>");h(l).appendTo(o),this.options.preferCo&&null!=this.options.preferCo?c==this.options.preferCo&&(t=a):a.ph==this.options.default_prefix&&(t=a)}t&&this.container.find(".country-phone-selected").html('<span><img src="img/blank.gif" class="flag flag-'+t.co.toLowerCase()+'">+'+t.ph+"</span>"),h(e).bind("click",function(e){i._toggleSelector()}),h(o).find(".country-phone-option").bind("click",function(){i.setElementSelected(this),i._toggleSelector()}),h(o).hover(function(){i.hideTimeout&&window.clearTimeout(i.hideTimeout)},function(){i.hideTimeout=window.setTimeout(i._mouseOverHide,1e3,this,i)}),this._initInput()},_mouseOverHide:function(e,t){var n;t.container&&(n=t.container.find(".country-phone-search"),h(n).is(":focus")?t.hideTimeout=window.setTimeout(t._mouseOverHide,1e3,e,t):h(e).hide())},_moveSuggestDown:function(e){var t,n=null,o=h(e).find(".hovered:visible");!o.length||((t=h(o).next(":visible")).length||(t=h(o).nextUntil(":visible").last().next()).length)&&(n=t),(n=n||h(e).find(".country-phone-option:visible").first())&&(h(e).find(".country-phone-option").add(".country-phone-search").removeClass("hovered"),h(n).addClass("hovered"))},_moveSuggestUp:function(e){var t,n=null,o=h(e).find(".hovered:visible");!o.length||((t=h(o).prev(":visible")).length||(t=h(o).prevUntil(":visible").last().prev()).length)&&(n=t),(n=n||h(e).find(".country-phone-option:visible").last())&&(h(e).find(".country-phone-option").add(".country-phone-search").removeClass("hovered"),h(n).addClass("hovered"))},suggestCountry:function(t,n){var e=this.container.find(".country-phone-options"),o=this;h(e).find(".country-phone-option").each(function(){var e;t?("россия"==t&&(t="росси"),0<=h(this).text().toLowerCase().indexOf(t)?(h(this).show(),n&&null!=n&&(e=h(this).data("phone"),o.prefixField.val()==e&&o.setElementSelected(this))):n||h(this).hide()):h(this).show()})},_toggleSelector:function(){var t=this.container.find(".country-phone-options");h(t).is(":visible")?(h(t).hide("fast"),h(t).find(".country-phone-search").val("").blur(),this.element.focus(),this.suggestCountry("")):(h(t).show("fast"),window.setTimeout(function(){var e=h(t).find(".country-phone-search");h(e).val("").focus()},300))},setElementSelected:function(e){var t=this.container.find(".country-phone-selected"),n=h(e).data("phone"),e=(e=h(e).html()).split("</span>");return h(t).html(e[0]+"</span>"),this.prefixField.val(n),n},_initInput:function(){var i=this;this.element.bind("keyup",function(){var t,n,o=h(this).val();1<o.length&&"+"==o[0]&&(t=o.substring(1),i.searchTimeout&&window.clearTimeout(i.searchTimeout),n=this,window.setTimeout(function(){var e=i.searchCountryCode(t);e&&(o=(o=h(n).val()).replace("+"+e,""),h(n).val(o))},1e3))}),this.initInputVal()},initInputVal:function(){var e=this.element.val();if(1<e.length&&"+"==e[0])for(var t=6;1<=t;t--){var n=e.substring(1,t),n=this.searchCountryCode(n);if(n){e=(e=this.element.val()).replace("+"+n,""),this.element.val(e);break}}else 1==e.length&&"+"==e[0]&&this.element.val("")},searchCountryCode:function(e){var t=this.container.find(".country-phone-options"),n=e,o=this,i=!1,s=[];if(h(t).find(".country-phone-option").each(function(){n==h(this).data("phone")&&s.push({co:h(this).data("co"),el:this})}),1==s.length)i=o.setElementSelected(s[0].el);else if(1<s.length){for(var r=0;r<s.length;r++){if(!o.options.preferCo){i=o.setElementSelected(s[r].el);break}if(o.options.preferCo==s[r].co){i=o.setElementSelected(s[r].el);break}}i=i||o.setElementSelected(s[0].el)}return i}})}(jQuery);
